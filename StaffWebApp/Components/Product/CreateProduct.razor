@page "/create-product"

<CreateProductInfoForm CreateProductInfo=_productInfoVm>
</CreateProductInfoForm>

<MudPaper Elevation="0">
    <MudButton OnClick="AddDetailClick" Variant="Variant.Filled" Color="Color.Primary">
        Thêm chi tiết
    </MudButton>
    <MudButton OnClick="async () => await OpenAddColorDialog()">
        Thêm màu
    </MudButton>
    <MudButton OnClick="async () => await OpenAddSizeDialog()">
        Thêm kích cỡ
    </MudButton>
</MudPaper>

@{
    int count = _productDetails.Count;
    while (count > 0)
    {
        count--;
        <CreateProductDetailForm @ref=_productDetailForms[count]
                                 CreateProductDetail=_productDetails[count]
                                 AvailableColors=_availableColors
                                 AvailableSizes=_availableSizes
                                 OnColorSelected=HanldeColorSelected
                                 OnDetailRemove=RemoveProductDetail>
        </CreateProductDetailForm>
    }
}

@foreach (var item in _imagesByColor)
{
    var y = _imageDict[_availableColors.SingleOrDefault(x => x.Id == item.Key)];
    <MudPaper Class="pa-4 my-2">
        <CreateImageForm @ref="y" Color="y.Color" Images="y.Images">
        </CreateImageForm>
    </MudPaper>
}

<MudButton OnClick="CheckData">Check data</MudButton>
