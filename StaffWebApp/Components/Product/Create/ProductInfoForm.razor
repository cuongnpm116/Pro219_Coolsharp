@page "/product-info"
@using StaffWebApp.Services.Category
@using StaffWebApp.Services.Category.ViewModel
@using StaffWebApp.Services.Product.Vms.Create

<MudForm @ref=_form Model="Product" Validation="_validator.ValidateValue" ValidationDelay="0">

    <MudTextField @bind-Value=Product.Name
                  For="() => Product.Name"
                  Required
                  Label="Tên sản phẩm">
    </MudTextField>

    <MudSelect T="CategoryVm"
               @ref=_categorySelect
               SelectedValues="Product.Categories"
               SelectedValuesChanged="async (IEnumerable<CategoryVm> selected) => await CategorySelectionChanged(selected)"
               MultiSelection
               ToStringFunc="(CategoryVm vm) => vm.CategoryName"
               For="() => Product._validateCategories"
               Immediate
               Label="Danh mục">
        @foreach (var category in _categories)
        {
            <MudSelectItem Value="category">@category.CategoryName</MudSelectItem>
        }
    </MudSelect>

</MudForm>
