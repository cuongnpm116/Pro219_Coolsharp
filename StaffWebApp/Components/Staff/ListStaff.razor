@page "/liststaff"
@using StaffWebApp.Components.Staff.Vms
@using StaffWebApp.Services.Staff
@using StaffWebApp.Services.Staff.Requests
@using WebAppIntegrated.Pagination

<MudTable Items="_staffVms.Data">
    <HeaderContent>
        <MudTh>Stt</MudTh>
        <MudTh>Tên đầy đủ</MudTh>
        <MudTh>Ngày sinh</MudTh>
        <MudTh>Email</MudTh>
        <MudTh>Tên tài khoản</MudTh>
        <MudTh>Trạng thái</MudTh>
        <MudTh>Vai trò</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd>@_staffVms.Data.ToList().IndexOf(context)</MudTd>
        <MudTd>@context.FullName</MudTd>
        <MudTd>@context.Dob</MudTd>
        <MudTd>@context.Email</MudTd>
        <MudTd>@context.Username</MudTd>
        <MudTd>@context.Status</MudTd>
        <MudTd>@context.Roles</MudTd>
    </RowTemplate>
</MudTable>

@code {
    [Inject]
    private IStaffService StaffService { get; set; } = null!;

    private PaginationResponse<StaffVm> _staffVms = new();
    private GetListStaffRequest _request = new();

    protected override async Task OnInitializedAsync()
    {
        await GetStaff();
    }

    private async Task GetStaff()
    {
        var apiRes = await StaffService.GetListStaffWithPagination(_request);
        _staffVms = apiRes.Value;
    }
}
